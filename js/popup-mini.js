let linkModal=document.querySelector(".popup-write-us__open"),linkMap=document.querySelector(".popup-map__open"),popupModal=document.querySelector(".popup-write-us"),popupMap=document.querySelector(".popup-map"),closeModal=popupModal.querySelector(".popup-write-us__close"),closeMap=popupMap.querySelector(".popup-map__close"),form=popupModal.querySelector(".popup-write-us__form"),name=popupModal.querySelector(".popup-write-us__name-field"),email=popupModal.querySelector(".popup-write-us__email-field"),text=popupModal.querySelector(".popup-write-us__question-text"),isStorageSupport=!0,storageName="",storageMail="";try{storageName=localStorage.getItem("name"),storageMail=localStorage.getItem("email")}catch(a){isStorageSupport=!1}linkModal.addEventListener("click",function(a){a.preventDefault(),popupModal.classList.add("popup-active"),storageName?(name.value=storageName,email.value=storageMail,text.focus()):name.focus()}),linkMap.addEventListener("click",function(a){a.preventDefault(),popupMap.classList.add("popup-active")}),closeModal.addEventListener("click",function(a){a.preventDefault(),popupModal.classList.remove("popup-active"),popupModal.classList.remove("popup-error"),text.value=""}),closeMap.addEventListener("click",function(a){a.preventDefault(),popupMap.classList.remove("popup-active")}),form.addEventListener("submit",function(a){name.value&&email.value?isStorageSupport&&(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(a.preventDefault(),!name.value&&name.classList.add("field-invalid"),!email.value&&email.classList.add("field-invalid"),popupModal.classList.remove("popup-error"),popupModal.offsetWidth=popupModal.offsetWidth,popupModal.classList.add("popup-error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&(a.preventDefault(),popupModal.classList.contains("popup-active")&&(popupModal.classList.remove("popup-active"),popupModal.classList.remove("popup-error")),popupMap.classList.contains("popup-active")&&popupMap.classList.remove("popup-active"))});